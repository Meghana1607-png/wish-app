<div class="h-dvh w-dvh flex">
  <!-- Header -->

  <app-header-side-bar></app-header-side-bar>

  <!-- Main Content -->
  <div class="mt-16 w-full ml-14 transition-all duration-300">
    <!-- Popup -->
    <div
      class="fixed z-10 top-150 text-2xl left-100 w-full py-2 bg-red-600 text-white text-center"
      *ngIf="showPopup"
    >
      {{ popupMessage }}
    </div>

    <div class="flex flex-wrap gap-4 ml-44 mt-6">
      <div
        *ngFor="let bloodGroup of bloodGroups"
        class="card bg-white shadow-lg flex justify-center items-center"
        (click)="modifyBloodGroup(bloodGroup)"
        style="width: 5cm; height: 4cm"
      >
        <div class="p-4">
          <h3 class="text-2xl text-red-700 font-semibold">
            {{ bloodGroup.bloodGroup.toUpperCase() }}
          </h3>
          <p class="text-2xl text-red-700">{{ bloodGroup.quantity }} ml</p>
        </div>
      </div>
      <button
        class="text-red-700 hover:text-red-500 transition duration-300 ml-8 text-3xl"
        (click)="openAddBloodGroupModal()"
      >
        +
      </button>
    </div>

    <!-- Modify Blood Group Quantity Modal -->
    <div
      class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center"
      *ngIf="modifyBloodGroupModal"
    >
      <div class="bg-white w-80 p-6 rounded-lg shadow-lg">
        <button
          class="text-gray-500 hover:text-gray-700 transition duration-300 ml-64"
          (click)="closeModal()"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-6 w-6"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M6 18L18 6M6 6l12 12"
            />
          </svg>
        </button>
        <h2 class="text-lg font-semibold mb-4">Modify Blood Group Quantity</h2>

        <form>
          <div class="mb-4">
            <label class="block text-sm font-medium mb-2 text-red-700"
              >Blood Group:</label
            >
            <input
              type="text"
              name="bloodGroup"
              [(ngModel)]="selectedBloodGroup.bloodGroup"
              class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500"
            />
          </div>
          <div class="mb-4">
            <label class="block text-sm font-medium mb-2 text-red-700"
              >Quantity:</label
            >
            <input
              type="number"
              name="quantity"
              [(ngModel)]="selectedBloodGroup.quantity"
              class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500"
              placeholder="Enter quantity"
            />
          </div>
          <button
            class="bg-red-600 text-white p-2 rounded-lg hover:bg-red-700 transition-colors duration-300"
            (click)="updateBloodGroupQuantity()"
          >
            Update Quantity
          </button>
        </form>
      </div>
    </div>

    <div
      class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center"
      *ngIf="addBloodGroupModal"
    >
      <div class="bg-white w-80 p-6 rounded-lg shadow-lg">
        <button
          class="text-gray-500 hover:text-gray-700 transition duration-300 ml-64"
          (click)="closeAddBloodGroupModal()"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-6 w-6"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M6 18L18 6M6 6l12 12"
            />
          </svg>
        </button>
        <h2 class="text-lg font-semibold mb-4">Add Blood Group</h2>

        <form>
          <div class="mb-4">
            <label class="block text-sm font-medium mb-2 text-red-700"
              >Blood Group:</label
            >
            <input
              type="text"
              class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500"
              #newBloodGroup
            />
          </div>
          <div class="mb-4">
            <label class="block text-sm font-medium mb-2 text-red-700">
              Quantity:
            </label>
            <input
              type="number"
              class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500"
              placeholder="Enter quantity"
              #newBloodQuantity
            />
          </div>
          <button
            class="bg-red-600 text-white p-2 rounded-lg hover:bg-red-700 transition-colors duration-300"
            (click)="addBloodGroup(newBloodGroup.value, newBloodQuantity.value)"
          >
            Add Blood Group
          </button>
        </form>
      </div>
    </div>
  </div>
</div>
